# Story 1.11 — Migrar Tailwind de CDN para NPM

**Epic:** MVP — Fase 4: Qualidade de Código
**Status:** Ready
**Estimativa:** 3 pontos (M)
**Agente responsável:** @dev (Dex)

---

## Objetivo

Atualmente o Tailwind CSS é carregado via CDN no `index.html`. Isso impede o purging de classes não utilizadas, aumenta o payload inicial (~30KB extra não utilizado), e impede o uso correto do `tailwind.config` para extensão de temas. Migrar para instalação via npm com integração ao Vite.

---

## Escopo

### IN
- Instalar `tailwindcss`, `postcss`, `autoprefixer` como devDependencies
- Criar `tailwind.config.js` e `postcss.config.js`
- Criar `src/index.css` com as diretivas `@tailwind`
- Importar `index.css` no `index.tsx`
- Remover a tag `<script src="https://cdn.tailwindcss.com">` do `index.html`
- Mover a configuração de tema (`colors`, `fontFamily`) do `tailwind.config` inline para o arquivo de configuração
- Verificar que todas as classes customizadas funcionam após migração

### OUT
- Não alterar design visual existente
- Não adicionar novos componentes de UI

---

## Critérios de Aceite

- [ ] `<script src="https://cdn.tailwindcss.com">` removido do `index.html`
- [ ] `npm run dev` funciona — app visual idêntico ao anterior
- [ ] `npm run build` gera bundle com CSS purgado (apenas classes usadas)
- [ ] Cores customizadas (`primary`, `secondary`, `accent`, `neutral.*`) funcionam
- [ ] Font Inter carregada corretamente
- [ ] Bundle CSS final menor que 100KB (purge funcionando)
- [ ] `tailwind.config.js` contém todas as extensões previamente inline no HTML

---

## Notas Técnicas

### Instalação
```bash
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

### `tailwind.config.js`
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}', './*.tsx', './components/**/*.tsx', './context/**/*.tsx'],
  theme: {
    extend: {
      fontFamily: { sans: ['Inter', 'sans-serif'] },
      colors: {
        primary: '#0B5FFF',
        secondary: '#00C853',
        accent: '#FFB300',
        neutral: {
          50: '#F6F7FB',
          100: '#Eef0F5',
          200: '#DDE2EA',
          500: '#9AA4B2',
          800: '#2F3A44',
          900: '#1A202C'
        }
      }
    }
  },
  plugins: []
}
```

**Atenção:** O projeto não usa estrutura `src/` — os componentes estão na raiz. Ajustar o `content` para apontar corretamente para `**/*.tsx`.

### `index.css`
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
```

### Animações customizadas
O código usa `animate-fade-in` e `animate-slide-up`. Verificar se essas classes estão definidas em algum lugar ou adicioná-las via `@layer utilities` no `index.css`.

---

## Riscos

- **Médio:** Classes dinâmicas geradas por string interpolation podem não ser detectadas pelo purger — auditoria necessária após migração
- **Médio:** O importmap no `index.html` usa `esm.sh` para imports — verificar se ainda é necessário após migração para build Vite completo
- **Baixo:** Animações `animate-fade-in` e `animate-slide-up` podem não estar no Tailwind padrão

---

## Testes Sugeridos

1. Comparação visual (screenshot) antes e depois — deve ser idêntico
2. Verificar todas as páginas: Dashboard, Upload, Review, Reports, Settings
3. Verificar estados hover, focus, active nos botões e inputs
4. `npm run build` → verificar tamanho do CSS gerado
5. Abrir `dist/` no navegador sem dev server → app funciona

---

## File List

| Arquivo | Ação |
|---------|------|
| `package.json` | Modificar (adicionar tailwindcss, postcss, autoprefixer) |
| `tailwind.config.js` | Criar |
| `postcss.config.js` | Criar |
| `index.css` | Criar |
| `index.tsx` | Modificar (importar index.css) |
| `index.html` | Modificar (remover CDN script) |

---

## Change Log

| Data | Agente | Ação |
|------|--------|------|
| 2026-02-20 | @architect (Brownfield) | Story criada |
