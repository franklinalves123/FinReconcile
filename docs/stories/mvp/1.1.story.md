# Story 1.1 — Sanidade do Repositório

**Epic:** MVP — Fase 0: Fundação
**Status:** Ready
**Estimativa:** 1 ponto (XS)
**Agente responsável:** @dev (Dex)

---

## Objetivo

Limpar o repositório de arquivos lixo macOS, corrigir conflito de versão do Vite, e garantir que o `.gitignore` previna futura contaminação. Sem esta story, o histórico git fica poluído e o build pode ser instável.

---

## Escopo

### IN
- Remover todos os `._*` files do tracking git (unstage + gitignore)
- Remover os `._*` files do filesystem (raiz e subpastas, exceto `.git/`)
- Corrigir conflito de versão: Vite 7.3 (dep) vs 6.2 (devDep) — manter apenas `devDependencies`
- Adicionar `._*`, `.DS_Store`, `dist/`, `.env.local` ao `.gitignore`

### OUT
- Não alterar lógica de negócio
- Não refatorar código existente
- Não instalar novas dependências além do ajuste de versão

---

## Critérios de Aceite

- [ ] `git status` não mostra nenhum arquivo `._*` staged ou tracked
- [ ] `find . -not -path "./.git/*" -name "._*"` retorna 0 resultados
- [ ] `.gitignore` contém: `._*`, `.DS_Store`, `dist/`, `.env.local`, `node_modules/`
- [ ] `package.json`: `vite` aparece **apenas** em `devDependencies` (remover de `dependencies`)
- [ ] `npm run build` executa sem erros

---

## Notas Técnicas

**Sequência de execução:**

```bash
# 1. Remover ._* do staging area (não do filesystem ainda)
git rm -r --cached --ignore-unmatch '._*'

# 2. Adicionar ao .gitignore
echo "._*" >> .gitignore
echo ".DS_Store" >> .gitignore
echo "dist/" >> .gitignore
echo ".env.local" >> .gitignore

# 3. Remover do filesystem (apenas raiz do projeto, não dentro de .git/)
find . -not -path "./.git/*" -name "._*" -type f -delete

# 4. package.json: remover "vite" de "dependencies"
# Mover "@vitejs/plugin-react" de dependencies para devDependencies se necessário
```

**Cuidado:** A pasta `.git/` também tem `._*` files — NÃO remover esses (são parte do pack do git).

---

## Riscos

- Baixo: remoção dos `._*` não afeta código-fonte real
- Verificar se `npm run dev` continua funcionando após ajuste do Vite

---

## Testes Sugeridos

1. Após a story: `git log --oneline` — verificar que commit de limpeza está limpo
2. `npm run build` — build sem erros
3. `npm run dev` — dev server sobe normalmente
4. Criar um arquivo `._teste` e confirmar que o `.gitignore` o ignora

---

## File List

> Preencher após implementação

| Arquivo | Ação |
|---------|------|
| `.gitignore` | Modificar |
| `package.json` | Modificar |
| `._*` (todos) | Deletar |

---

## Change Log

| Data | Agente | Ação |
|------|--------|------|
| 2026-02-20 | @architect (Brownfield) | Story criada |
